/*
File Info: Copyright 2010-2012 Hillside Technology, Inc. And Hillside Software!!!!
Script Version: 1.82
*************/
jQuery(document).ready(function(d){d(document).on("click","div.hc-map-loading",function(f){d(".hc-map-loading").hide()});if(d(".twitter-share-button").length>0&&typeof window.twttr=="undefined"){var c=document.createElement("script");c.src="http://platform.twitter.com/widgets.js";c.type="text/javascript";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b)}if(jQuery(".hc-listing").length>0){jQuery(".hc-listing").each(function(e,f){if(new Date(parseInt(jQuery(this).data("listdatesecs"))*1000)>=new Date(new Date()-(1000*60*60*24*6))){jQuery(this).find(".hc_ribbonContainer").fadeIn()}})}jQuery(document).on("click","a.hc_mapPopup, .hc_mapPopup a, .hc_mapPopup div",function(g){var e=jQuery(this).attr("href")?jQuery(this).attr("href"):jQuery(this).parent("a").attr("href");if(e.length>4){jQuery('<a class="colorbox" href="'+e+'">[Show Map]</a>').colorbox({href:e,iframe:true,width:"50%",height:"480px",open:true,fixed:true})}var f=jQuery(this).parent(".hc-listing");showGoogleMapsPopup(f);return false});jQuery(document).on("click","a.hc_addFav, .hc_addFav a, .hc_addFav div",function(f){var e=jQuery(this).parent(".hc-listing");if(e.length<1){e=jQuery(".hc-listing:first")}hc_saveProperty(e);return false});jQuery(document).on("click",".hc-login-button",function(f){hc_leadLogin(jQuery("#hc_login_email").val(),jQuery("#hc_login_password").val(),d(this).parent("form"));return false});if(d(".HC_Prop_Photos").length>0){var a=d(".HC_Prop_Photos");a.after("<div class='cycleControls' style=\"font-size: 20px; font-weight: 700; color: #666666; width: "+a.width()+"px;\"><a class='hc_iconic hc_arrow_left'></a><span class='pics-caption'></span><a style='float:right;' class='hc_iconic hc_arrow_right'></a></div>");d(".cycleControls .hc_iconic").bind("mouseover",function(f){d(this).animate({fontSize:"33px"},{duration:200})}).bind("mouseout",function(f){d(this).animate({fontSize:"20px"},{duration:200})});d(".HC_Prop_Photos").cycle({prev:".hc_arrow_left",next:".hc_arrow_right"})}autoInitAutoComplete()});function hc_loginRequired(a){if(typeof HCProxy=="undefined"||typeof HCProxy.leadJSON=="undefined"||HCProxy.leadJSON==null||typeof HCProxy.leadJSON.Token=="undefined"||HCProxy.leadJSON.Token.length<3){if(a){hc_showLoginPopup()}return false}else{if(HCProxy.leadJSON.Token.length>3){return true}}if(typeof a=="undefined"||a==null){a=true}if(typeof hc_ajaxUrl=="undefined"){window.hc_ajaxUrl=HCProxy.ajaxurl}if(typeof HCProxy!="undefined"&&typeof HCProxy.leadJSON!="undefined"&&typeof HCProxy.leadJSON.Token=="undefined"&&HCProxy.leadJSON.Token.length<3){if(a){hc_showLoginPopup()}return false}else{return false}}function hc_showLoginPopup(){hc_google_trackevent("OpenLoginSignupPopup","");$.ajax({type:"POST",url:HCProxy.ajaxurl+"?action=hc_get_html_tile&name=LoginAndSignup",data:{},success:function(a){if(a&&a.html&&a.html.length>0){if(a.html.indexOf("Error")<=-1){jQuery('<a class="inline colorbox" href="">Signup Now</a>').colorbox({title:"Free Registration and Login",html:a.html,width:"50%",open:true,height:"430px",initialHeight:430});hc_tabifyPage()}else{alert("Error: Could not get the login/signup screen. Please try again later.")}}},dataType:"json"})}function hc_htmlEncode(a){return a.replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#039;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getQrCodeImageUrl(b,a,c){hc_google_trackevent("GetQR","For "+b+"");if(typeof a=="undefined"||!a){a=6}if(typeof c=="undefined"){c=""}if(typeof b=="undefined"||b.length<5||b.length>1000){return"ERROR: Invalid URL."}if(parseInt(a)>40){a=40}if(parseInt(a)<2){a=2}return"http://www.qrleads4me.com/GetQRCode.aspx?Scale="+a.toString()+"&URL="+encodeURIComponent(b)+"&SiteToken="+encodeURIComponent(c)}function getTokenDataArray(d){if(typeof d=="undefined"||d.length<1){return[]}var c=[],a=d.replace(/,,/g,",").replace(/,,/g,",").replace(/^[\s<,]|[,>\s]$/g,"").split(",");for(var b=0;b<a.length;b++){if((a[b]).toString().replace(/^[\s<,]|[,>\s]$/g,"").toUpperCase()!="ALL"){c[c.length]={id:a[b],name:a[b]}}}return c}function autoInitAutoComplete(){if(typeof jQuery.ui.autocomplete!="undefined"){var d=jQuery("select.hc-autocomplete, .hc-autocomplete select[multiple]");var a=d.find("optgroup option").remove();if(a.length>0){d.prepend(a)}if(d.length>0){for(var c=0;c<d.length;c++){var e=jQuery(d[c]);if(jQuery("#"+e.attr("id")+"_auto").length<1){e.after("<input class='hc-text-auto hc-text-"+e.attr("name")+"' type='text' name='"+e.attr("name")+"' id='"+e.attr("id")+"_auto' />");autoCreateAutoComplete(e);e.hide()}}}var b=jQuery("input[data-mode], select[data-mode]");for(var c=0;c<b.length;c++){var e=jQuery(b[c]);if(jQuery("#"+e.attr("id")+"_auto").length<1){var f=[];if(typeof(lastSearchJson)!="undefined"&&typeof lastSearchJson[e.attr("name")]!="undefined"){f=getTokenDataArray(lastSearchJson[e.attr("name")])}e.after("<input class='hc-text-auto hc-text-"+e.attr("name")+"' type='text' name='"+e.attr("name")+"' id='"+e.attr("id")+"_auto' />");autoCreateAutoComplete(e);e.hide()}}}else{alert("Error: Javascript Library jQuery UI Not Found")}}function autoCreateAutoComplete(b){var a=function(d){return d.split(/,\s*/)};var c=function(d){return a(d).pop()};jQuery("#"+b.attr("id")+"_auto").bind("keydown",function(d){if(d.keyCode===jQuery.ui.keyCode.TAB&&jQuery(this).data("autocomplete").menu.active){d.preventDefault()}}).autocomplete({source:function(e,d){jQuery.ajax({url:"http://www.myhomecards.com/AjaxHandler.aspx?Action=GetFieldOptions&FieldName="+b.attr("name")+"&MLS=DEN",dataType:"jsonp",data:{Query:c(e.term)},success:function(f){d(jQuery.map(f.data,function(g){return{label:g.name,value:g.id}}))}})},search:function(){var d=c(this.value)},focus:function(){return false},select:function(e,f){var d=a(this.value);d.pop();d.push(f.item.value);d.push("");this.value=d.join(", ").trim([" ",","]).trim([" ",","]);return false}});jQuery("#"+b.attr("id")+"_auto").bind("focus",function(d){$(this).autocomplete("search"," ")})}function hc_getAccountJson(a){return jQuery.post((window.hc_ajaxUrl||HCProxy.ajaxurl),{action:"hc_get_account_json"},function(b){window.currentAgent=b;if(b){if(a&&a.success){a.success(b)}}else{if(a&&(a.failure||a.error)){a.failure?a.failure(b):a.error(b)}}},"json")}function hc_getFeaturedListingsJson(a){hc_google_trackevent("FeaturedListings","");return jQuery.post((window.hc_ajaxUrl||HCProxy.ajaxurl),{action:"hc_get_featured_listings_json",limit:10},function(b){window.featuredListings=b;if(b){if(a&&a.success){a.success(b)}}else{if(a&&(a.failure||a.error)){a.failure?a.failure(b):a.error(b)}}},"json")}function hc_getFieldNameJson(a){return jQuery.post((window.hc_ajaxUrl||HCProxy.ajaxurl),{action:"hc_get_fields"},function(b){window.searchFields=b;if(b&&a&&a.success){a.success(b)}},"json")}function hc_getSearchFieldsJsonHtml(a){return jQuery.post((window.hc_ajaxUrl||HCProxy.ajaxurl),{action:"hc_get_fields_html"},function(b){window.searchFieldsHtml=b;if(b&&a&&a.success){a.success(b)}},"json")}function hc_getHtmlTile(b,a){return jQuery.post((window.hc_ajaxUrl||HCProxy.ajaxurl),{action:"hc_get_html_tile",name:b},function(c){window.searchFieldsHtml=c;if(c&&a&&a.success){a.success(c)}},"json")}function hc_leadLogout(){hc_google_trackevent("Logout","");HCProxy.leadJSON=new Object();jQuery.ajax({type:"POST",url:(window.hc_ajaxUrl||HCProxy.ajaxurl),data:{action:"hc_logout"},success:function(a){alert("Logged out successfully!")},dataType:"json"})}function hc_leadLogin(b,a,c){if(typeof c=="undefined"||c==null){c=jQuery("form.hc_login_form")}if(typeof b!="undefined"&&b.length>5){hc_google_trackevent("Login",b);jQuery("#hc_login_ajax").html('<h3 class="ui-loading">Please wait... Logging into Property Database...</h3>');jQuery.ajax({type:"POST",url:(window.hc_ajaxUrl||HCProxy.ajaxurl),data:{action:"hc_login",email:b,pass:a},success:function(e){jQuery("#hc_login_ajax").html('<h3 class="ui-loading">... Done!</h3>');if(e&&e.Token&&e.Token.length>0){jQuery("#hc_login_ajax").html('<h3 class="ui-loading">Welcome Back '+e.FirstName+"!</h3>");HCProxy.leadJSON=e;jQuery(c).slideUp().before("<h2 class='hc_login_msg'>Welcome Back "+e.FirstName+"!</h2>");var d=setTimeout("jQuery.colorbox.remove()",2200)}else{if(e&&e.Error){msg="We ran into a problem: \n"+e.Error;jQuery("#hc_login_ajax").html('<h3 class="ui-loading">'+msg+"</h3>");if(jQuery("#hc_login_ajax").length<1){alert(msg)}}else{msg="We could not log you in with the specified username and password. Please try again.";jQuery("#hc_login_ajax").html('<h3 class="ui-loading ui-warn">'+msg+"</h3>");if(jQuery("#hc_login_ajax").length<1){alert(msg)}}}},dataType:"json"})}return false}function hc_leadSignup(a){window.leadData=null;if(!leadData){leadData={SignupName:jQuery("#hc_signup_name").val(),SignupPhone:jQuery("#hc_signup_phone").val(),SignupEmail:jQuery("#hc_signup_email").val(),SignupPassword:jQuery("#hc_signup_password").val()}}leadData.action="hc_signup";hc_google_trackevent("Signup","");if(leadData.SignupEmail&&leadData.SignupEmail.length>5){jQuery.ajax({type:"POST",url:(window.hc_ajaxUrl||HCProxy.ajaxurl),data:leadData,success:function(b){if(b&&typeof b.Token!="undefined"){HCProxy.leadJSON=b;jQuery.colorbox.remove();alert("Successfully Logged In!");if(jQuery("#hc_signup_ajax").length>0){jQuery("#hc_signup_ajax").html(b.Message)}else{if(b&&b.length>0){jQuery("#hc_signup_ajax").html(b)}}}},dataType:"json"})}else{jQuery(".hc_signup_ajax").html('<div class="hc-error-msg">Please enter a valid Email.</div>');jQuery('input[name="SignupEmail"]',a).focus()}return false}function showGoogleMapsPopup(c){window.listingToMap=c;if(typeof google=="undefined"||typeof google.maps=="undefined"){var b=document.createElement("script");b.src="http://maps.google.com/maps/api/js?v=3.7&libraries=drawing&key=AIzaSyALmXnBV-SN9wr65_DDh9Ivyq8iD55UV4s&sensor=false&callback=hc_showListingOnMap";b.type="text/javascript";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}else{hc_showListingOnMap()}}function hc_showListingOnMap(c){hc_google_trackevent("ShowOnMap","");if(typeof c=="undefined"||c==null){if(typeof window.listingToMap!="undefined"){c=window.listingToMap}}if(typeof c=="undefined"||c==null){alert("No map-able listing was found");return false}if(c.is(".hc-listing")==false&&c.parent(".hc-listing").length>0){c=c.parent(".hc-listing")}return true;if(c.length>0){var e=c.data("addr");var b=parseFloat(c.data("lat"));var d=parseFloat(c.data("lon"));var a={scrollwheel:false,center:new google.maps.LatLng(b,d),zoom:10,mapTypeId:google.maps.MapTypeId.ROADMAP};if(typeof window.hcPopupMap=="undefined"||window.hcPopupMap==null){window.hcPopupMap=new google.maps.Map(document.getElementById("hc_map_popup"),a)}}}function hc_saveProperty(b){if(hc_loginRequired(true)==false){return false}if(typeof b=="undefined"){alert("Error: Could nopt save property. Please try again later.\n #05")}if(typeof b!="undefined"&&b.data){if(typeof listingID=="undefined"||listingID.length<1){listingID=b.data("listingid")}}if(typeof hc_ajaxUrl=="undefined"){window.hc_ajaxUrl=HCProxy.ajaxurl}var a=jQuery.extend({action:"hc_lead_save_listing",LeadToken:HCProxy.leadJSON.Token,ListingID:listingID,notes:"From Wordpress Site: "+self.location.href,source:"WP"},b.data());if(listingID&&listingID.toString().length>2){hc_google_trackevent("SaveListing","Listing ID: "+listingID);jQuery.ajax({type:"POST",url:(HCProxy.ajaxurl)+"?action="+a.action,data:a,success:function(c){if(c&&c.Message&&c.Message.length>0){if(c.Message.indexOf("Error")<-1){jQuery(".hc_addFav a.hc_lnk",b).html("SAVED");jQuery(".hc_addFav_msg").html(c.Message)}}},dataType:"json"});return false}}function hc_getMySavedProperties(){if(hc_loginRequired(true)==false){return false}var a={action:"hc_get_lead_saved_listings",LeadToken:HCProxy.leadJSON.Token,source:"WP"};jQuery.ajax({type:"POST",url:(HCProxy.ajaxurl)+"?action="+a.action,data:a,success:function(b){if(b&&b.Message&&b.Message.length>0){if(b.Message.indexOf("Error")<-1){jQuery(".hc_addFav a.hc_lnk",listingDivElement).html("SAVED");jQuery(".hc_addFav_msg").html(b.Message)}}},dataType:"json"});return false}function hc_log(b,d,c,f){var a={LeadToken:HCProxy.leadJSON.Token,source:"WP",eventType:b,subType:d,listingID:c,url:self.location.href};if(typeof _gaq!="undefined"){var e=d+"";if(c!=""){e="ListingID="+c}_gaq.push(["_trackEvent","HomeCards",b,e])}jQuery.ajax({type:"POST",url:(HCProxy.ajaxurl)+"?action=homecardsevent",data:a,success:function(g){if(typeof f=="function"){f(g)}},dataType:"json"});return false}function hc_viewListing(c,b){hc_google_trackevent("PreviewedListing",c);var a={action:"hc_add_viewed_listing",listingId:c,LeadToken:(HCProxy.leadJSON!=null&&typeof HCProxy.leadJSON.Token!="undefined"?HCProxy.leadJSON.Token:""),source:"WP"};jQuery.ajax({type:"POST",url:(HCProxy.ajaxurl)+"?action="+a.action,data:a,success:function(d){if(typeof b!="undefined"&&typeof b.callback=="function"){b.callback(d)}},dataType:"json"});return false}function hc_tabifyPage(){jQuery("ul.hc-tabs").each(function(){if(jQuery(this).data("tabify")==true){return true}var a,b,c=jQuery(this).find("a");a=c.first().addClass("active");b=jQuery(a.attr("href"));c.not(":first").each(function(){jQuery(jQuery(this).attr("href")).slideUp()});jQuery(this).on("click","a",function(d){a.removeClass("active");b.slideUp();a=jQuery(this);b=jQuery(jQuery(this).attr("href"));a.addClass("active");b.slideDown(500,"swing",function(){jQuery.colorbox.resize()});return false});jQuery(this).data("tabify",true)})}function hc_google_trackevent(a,b){if(typeof _gaq!="undefined"){_gaq.push(["_trackEvent","HomeCards",a,b])}};